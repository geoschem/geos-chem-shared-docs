.. _cfg-phot-chem:

######################################################
Aerosol, chemistry, and photolysis configuration files
######################################################

.. note::

   You should not modify these files unless:

   #. You need to update aerosol optical properties (such as
      cross-sections) that are used to compute aerosol optical depth.
   #. You need to add or remove species for which photolysis rates
      will be computed.
   #. You need to modify the GEOS-Chem chemical mechanism.

.. _cfg-phot-chem-aer:

==================================
Aerosol optics configuration files
==================================

The following files (stored in the
:file:`ExtData/CHEM_INPUTS/AEROSOL_OPTICS/Aerosol_Optics` directory tree)
contain optical properties for several aerosol species.  See the
:ref:`cfg-gc-yml` file for the current file path specification.

+---------------+--------------------------------------+
| File          | Contains optical properties for ...  |
+===============+======================================+
| ``brc.dat``   | Brown carbon optical properties      |
+---------------+--------------------------------------+
| ``dust.dat``  | Mineral dust optical properties      |
+---------------+--------------------------------------+
| ``org.dat``   | Organic carbon optical properties    |
+---------------+--------------------------------------+
| ``so4.dat``   | Sulfate optical properties           |
+---------------+--------------------------------------+
| ``soot.dat``  | Black carbon optical properties      |
+---------------+--------------------------------------+
| ``ssa.dat``   | Accumulation-mode sea salt aerosol   |
+---------------+--------------------------------------+
| ``ssc.dat``   | Coarse-mode sea salt aerosol         |
+---------------+--------------------------------------+
| ``h2so4.dat`` | Sulfuric acid                        |
+---------------+--------------------------------------+

The properties are provided at multiple wavelengths to be used in the
online calculation of the aerosol optical depth diagnostics. Up to
three wavelentghs can be selected in the Radiation Menu of
input.geos. These properties are also used for in the RRTMG radiative
transfer model (if enabled).

.. _cfg-phot-chem-chem:

======================================
Chemical mechanism configuration files
======================================

GEOS-Chem Classic and GCHP simulations use source code generated by `The
Kinetic PreProcessor <https://github.com/KineticPreProcessor/KPP>`_.
If you need to update the default chemistry mechanism, you will need
to do the following steps:

#. Modify the relevant KPP configuration files (described below);
#. Run KPP to generate updated solver source code;
#. Recompile the GEOS-Chem source code to create a new executable;
#. Run your simulation.

Chemical mechanism configuration files are located in these folders:

.. option:: KPP/fullchem

   Contains configuration files for the default "full-chemistry"
   mechanism (NOx + Ox + aerosols + Br + Cl + I).

   - :file:`fullchem.kpp`: Main configuration file for the
     **fullchem** mechanism.

   - :file:`fullchem.eqn`: List of species and reactions
     for the **fullchem** mechanism.

.. option:: KPP/carbon

   Contains configuration files for the carbon gases mechanism
   (CH4-CO2-CO-OCS):

   - :file:`carbon.kpp`: Main configuration file for the **carbon**
     mechanism.

   - :file:`carbon.eqn`: List of species and reactions for the **carbon**
     mechanism.

.. option:: KPP/custom

   Contains configuration files that you can edit if you need to
   create a custom mechanism.   We recommend that you create the
   custom in this folder and leave :file:`KPP/fullchem` and
   :file:`KPP/Hg` untouched.

   - :file:`custom.kpp`: Copy of :file:`fullchem.kpp`

   - :file:`custom.eqn`: Copy of :file:`fullchem.eqn`.

.. option:: KPP/Hg

   Contains configuration files for the mercury chemistry mechanism:

   - :file:`Hg.kpp`: Main configuration file for the **Hg**
     mechanism.

   - :file:`Hg.eqn`: List of species and reactions for the **Hg**
     mechanism.

Please see the following references for more information about KPP:

#. The KPP user manual (`kpp.readthedocs.io <https://kpp.readthedocs.io>`_)
#. Supplemental Guide: :ref:`kppguide`

.. _cfg-phot-chm-phot:

==============================
Photolysis configuration files
==============================

Configuration files containing photolysis parameters (such as quantum
yields, cross sections, branching ratios, etc.) may be found in
subdirectories of :file:`ExtData/CHEM_INPUTS/CLOUD-J/`. See the
:ref:`cfg-gc-yml` file for the current file path specifications.

At present, the mercury (Hg) simulation still uses the legacy
:program:`FAST-JX` photolysis scheme.  Configuration files for
:program:`FAST-JX` may be found in the
:file:`ExtData/CHEM_INPUTS/FAST-JX/` directory tree.
